{"resourceType":"StructureDefinition","id":"1dd6f087-4c10-4fd8-93a2-8a96b628a0fa","url":"https://fhir.nhs.uk/StructureDefinition/NHSDigital-Observation","name":"NHSDigitalObservation","status":"draft","fhirVersion":"4.0.1","kind":"resource","abstract":false,"type":"Observation","baseDefinition":"https://fhir.hl7.org.uk/StructureDefinition/UKCore-Observation","derivation":"constraint","differential":{"element":[{"id":"Observation.extension","path":"Observation.extension","slicing":{"discriminator":[{"type":"value","path":"url"}],"rules":"open"},"min":0},{"id":"Observation.extension:covid19Testing","path":"Observation.extension","sliceName":"covid19Testing","min":0,"max":"1","type":[{"code":"Extension","profile":["https://fhir.nhs.uk/StructureDefinition/Extension-COVID19-TestResult"]}],"mustSupport":true},{"id":"Observation.identifier","path":"Observation.identifier","definition":"A unique identifier assigned to this observation.\r\n\r\nFor COVID-19 Test History this will be The identifier will be the specimen id.\r\n\r\n```json\r\n\r\n    \"identifier\":  [\r\n        {\r\n            \"system\": \"https://fhir.nhs.uk/Id/SpecimenId\",\r\n            \"value\": \"eb89a392-5b20-11eb-ae93-0242ac130002\"\r\n        }\r\n    ],\r\n```","min":1,"mustSupport":true},{"id":"Observation.identifier.system","path":"Observation.identifier.system","min":1},{"id":"Observation.identifier.value","path":"Observation.identifier.value","min":1},{"id":"Observation.status","path":"Observation.status","definition":"The status of the result value.\r\n\r\nFor COVID-19 Test History the status of the observation will always be `final`\r\n\r\n```json\r\n\r\n    \"status\": \"final\",\r\n```","mustSupport":true},{"id":"Observation.category","path":"Observation.category","slicing":{"discriminator":[{"type":"value","path":"coding.system"}],"rules":"open"},"definition":"This is an optional element. If used the category will always be `laboratory`\r\n\r\n```json\r\n\r\n    \"category\":  [\r\n        {\r\n            \"coding\":  [\r\n                {\r\n                    \"system\": \"http://terminology.hl7.org/CodeSystem/observation-category\",\r\n                    \"code\": \"laboratory\",\r\n                    \"display\": \"Laboratory\"\r\n                }\r\n            ],\r\n            \"text\": \"Laboratory\"\r\n        }\r\n    ],\r\n```\r\n\r\nFor COVID-19 Tests, the ValueSet **SHOULD** be used to indicate which test pillar the observation originated.\r\n\r\n```json\r\n\r\n     \"category\": [\r\n        {\r\n            \"coding\": [\r\n                {\r\n                    \"system\": \"https://fhir.nhs.uk/CodeSystem/covid-test-pillar\",\r\n                    \"code\": \"pillar-1\",\r\n                    \"display\": \"pillar 1\"\r\n                }\r\n            ]\r\n        }\r\n    ],\r\n```","mustSupport":true,"binding":{"strength":"required","valueSet":"https://fhir.nhs.uk/ValueSet/NHSDigital-Observation-category"}},{"id":"Observation.category.coding","path":"Observation.category.coding","min":1},{"id":"Observation.category.coding.system","path":"Observation.category.coding.system","min":1,"mustSupport":true},{"id":"Observation.category.coding.code","path":"Observation.category.coding.code","min":1,"mustSupport":true},{"id":"Observation.category:COVID-TestPillar","path":"Observation.category","sliceName":"COVID-TestPillar","max":"1"},{"id":"Observation.category:COVID-TestPillar.coding.system","path":"Observation.category.coding.system","fixedUri":"https://fhir.nhs.uk/CodeSystem/covid-test-pillar"},{"id":"Observation.category:UKCoreCategory","path":"Observation.category","sliceName":"UKCoreCategory"},{"id":"Observation.category:UKCoreCategory.coding.system","path":"Observation.category.coding.system","fixedUri":"http://terminology.hl7.org/CodeSystem/observation-category"},{"id":"Observation.code","path":"Observation.code","definition":"Type of observation, for COVID-10 see [Observation Definition](https://simplifier.net/guide/NHSDigital/Home/FHIRAssets/AllAssets/ObservationDefinition/ObservationDefinition.guide.md) for `code` values.\r\n\r\n```json\r\n    \"code\": {\r\n        \"coding\":  [\r\n            {\r\n                \"system\": \"http://snomed.info/sct\",\r\n                \"code\": \"871555000\",\r\n                \"display\": \"Detection of ribonucleic acid of Severe acute respiratory syndrome coronavirus 2\"\r\n            }\r\n        ]\r\n    },\r\n```","mustSupport":true},{"id":"Observation.subject","path":"Observation.subject","definition":"The NHS Number will be an identifier reference which can be used with PDS FHIR API to return Patient demographics. If a local Patient is available, a reference to this will be present (e.g. \"Patient/123\")\r\n\r\n```json\r\n\r\n    \"subject\": {\r\n        \"reference\": \"Patient/123\",\r\n        \"identifier\":  [\r\n            {\r\n                \"system\": \"https://fhir.nhs.uk/Id/nhs-number\",\r\n                \"value\": \"987123456\"\r\n            }\r\n        ]\r\n    },\r\n```","min":1,"type":[{"code":"Reference","targetProfile":["http://hl7.org/fhir/StructureDefinition/Group","http://hl7.org/fhir/StructureDefinition/Device","https://fhir.hl7.org.uk/StructureDefinition/UKCore-Location","https://fhir.nhs.uk/StructureDefinition/NHSDigital-Patient-Minimal"]}],"constraint":[{"key":"patient-reference","severity":"warning","human":"subject - An identifier reference or resource reference must be provided","expression":"(reference.exists() or (identifier.exists()))","source":"https://fhir.nhs.uk/StructureDefinition/NHSDigital-Observation"},{"key":"patient-nhs","severity":"error","human":"Supplied NHS Number is outside the English and Welsh NHS Number range or length of the number is wrong.","expression":"identifier.where(system='https://fhir.nhs.uk/Id/nhs-number').exists().not() or (identifier.where(system='https://fhir.nhs.uk/Id/nhs-number').exists()  and identifier.where(system='https://fhir.nhs.uk/Id/nhs-number').value.matches('^([456789]{1}[0-9]{9})$'))","source":"https://fhir.nhs.uk/StructureDefinition/NHSDigital-Observation"}],"mustSupport":true},{"id":"Observation.subject.identifier.system","path":"Observation.subject.identifier.system","min":1,"fixedUri":"https://fhir.nhs.uk/Id/nhs-number"},{"id":"Observation.subject.identifier.value","path":"Observation.subject.identifier.value","min":1},{"id":"Observation.effective[x]","path":"Observation.effective[x]","definition":"The date and time the result was asserted.\r\n\r\n```json\r\n\r\n    \"effectiveDateTime\": \"2020-09-23T13:00:08.476+00:00\"\r\n```","min":1,"type":[{"code":"dateTime"}],"mustSupport":true},{"id":"Observation.performer","path":"Observation.performer","definition":"Who was responsible for asserting the observed value as \"true\". \r\n\r\n```json\r\n\r\n\"performer\": [\r\n  {\r\n    \"type\": \"Organization\",\r\n    \"identifier\": {\r\n      \"type\": {\r\n        \"coding\": [\r\n          {\r\n            \"system\": \"https://fhir.nhs.uk/CodeSystem/organisation-role\",\r\n            \"code\": \"173\",\r\n            \"display\": \"PATHOLOGY LAB\"\r\n          }\r\n        ]\r\n      },\r\n      \"value\": \"LFD004\"\r\n    }\r\n  },\r\n  {\r\n    \"type\": \"Organization\",\r\n    \"identifier\": {\r\n      \"type\": {\r\n        \"coding\": [\r\n          {\r\n            \"system\": \"https://fhir.nhs.uk/Id/OrgType\",\r\n            \"code\": \"TestCentreId\",\r\n            \"display\": \"Testing Centre\"\r\n          }\r\n        ]\r\n      },\r\n      \"value\": \"WKE03\"\r\n    }\r\n  }\r\n]\r\n\r\n```","type":[{"code":"Reference","profile":["https://fhir.nhs.uk/StructureDefinition/NHSDigital-Reference"],"targetProfile":["https://fhir.nhs.uk/StructureDefinition/NHSDigital-Organization","http://hl7.org/fhir/StructureDefinition/CareTeam","https://fhir.nhs.uk/StructureDefinition/NHSDigital-Patient","https://fhir.nhs.uk/StructureDefinition/NHSDigital-PractitionerRole-Minimal"],"aggregation":["referenced"]}],"constraint":[{"key":"performer","severity":"error","human":"An identifier reference or resource reference must be provided","expression":"(reference.exists() or identifier.exists())","source":"https://fhir.nhs.uk/StructureDefinition/NHSDigital-Observation"}],"mustSupport":true},{"id":"Observation.value[x]","path":"Observation.value[x]","definition":"### COVID-19 valueCodeableConcept \r\n\r\nThe COVID 19 test result. This is a SNOMED CT from the valueSet associated with the `code`, see [Observation Definition](https://simplifier.net/guide/NHSDigital/Home/FHIRAssets/AllAssets/ObservationDefinition/ObservationDefinition.guide.md)\r\n\r\n```json \r\n\r\n    \"valueCodeableConcept\": {\r\n        \"coding\":  [\r\n            {\r\n                \"system\": \"http://snomed.info/sct\",\r\n                \"code\": \"1240581000000104\",\r\n                \"display\": \"SARS-CoV-2 (severe acute respiratory syndrome coronavirus 2) detection result positive\"\r\n            }\r\n        ],\r\n        \"text\": \"SARS-CoV-2-ORGY\"\r\n    },\r\n```","mustSupport":true},{"id":"Observation.method","path":"Observation.method","definition":"The name of the test that was performed, this is a SNOMED CT concept.\r\n\r\n```json\r\n\r\n    \"method\": {\r\n        \"coding\":  [\r\n            {\r\n                \"system\": \"http://snomed.info/sct\",\r\n                \"code\": \"1240461000000109\",\r\n                \"display\": \"Measurement of SARS-CoV-2 antibody (procedure)\"\r\n            }\r\n        ]\r\n    },\r\n```","mustSupport":true},{"id":"Observation.method.coding.system","path":"Observation.method.coding.system","min":1},{"id":"Observation.method.coding.code","path":"Observation.method.coding.code","min":1},{"id":"Observation.method.coding.display","path":"Observation.method.coding.display","min":1},{"id":"Observation.specimen","path":"Observation.specimen","definition":"For COVID-19 Test History. The identifier of the specimen used for the test.\r\n \r\n```json\r\n\r\n    \"specimen\": {\r\n        \"identifier\": {\r\n            \"system\": \"https://fhir.nhs.uk/Id/SpecimenId\",\r\n            \"value\": \"eb89a392-5b20-11eb-ae93-0242ac130002\"\r\n        }\r\n    },\r\n```","mustSupport":true},{"id":"Observation.specimen.identifier.system","path":"Observation.specimen.identifier.system","min":1},{"id":"Observation.specimen.identifier.value","path":"Observation.specimen.identifier.value","min":1},{"id":"Observation.device","path":"Observation.device","definition":"Details of the [COVID-19 test kit](https://simplifier.net/resolve?target=simplifier&scope=uk.nhsdigital.r4&canonical=https://fhir.nhs.uk/Id/Covid19-TestKit) used.  \r\n\r\n```json\r\n\r\n    \"device\": {\r\n        \"identifier\": {\r\n            \"system\": \"https://fhir.nhs.uk/Id/Covid19-TestKit\",\r\n            \"value\": \"LFT\"\r\n        },\r\n        \"display\": \"Lateral Flow Test\"\r\n    }\r\n```","mustSupport":true},{"id":"Observation.device.identifier.system","path":"Observation.device.identifier.system","min":1},{"id":"Observation.device.identifier.value","path":"Observation.device.identifier.value","min":1},{"id":"Observation.device.display","path":"Observation.device.display","min":1}]}}