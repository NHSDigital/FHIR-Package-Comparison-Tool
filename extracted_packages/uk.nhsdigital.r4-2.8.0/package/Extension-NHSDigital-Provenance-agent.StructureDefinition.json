{"resourceType":"StructureDefinition","id":"67329733-af3b-40f1-95f8-a83812dc0a43","url":"https://fhir.nhs.uk/StructureDefinition/Extension-Provenance-agent","name":"ExtensionProvenanceAgent","status":"draft","fhirVersion":"4.0.1","mapping":[{"identity":"rim","uri":"http://hl7.org/v3","name":"RIM Mapping"}],"kind":"complex-type","abstract":false,"context":[{"type":"element","expression":"Task"},{"type":"element","expression":"Claim"},{"type":"element","expression":"Appointment"}],"type":"Extension","baseDefinition":"http://hl7.org/fhir/StructureDefinition/Extension","derivation":"constraint","differential":{"element":[{"id":"Extension.url","path":"Extension.url","fixedUri":"https://fhir.nhs.uk/StructureDefinition/Extension-Provenance-agent"},{"id":"Extension.value[x]","path":"Extension.value[x]","min":1,"type":[{"code":"Reference","targetProfile":["https://fhir.nhs.uk/StructureDefinition/NHSDigital-PractitionerRole","https://fhir.nhs.uk/StructureDefinition/NHSDigital-Practitioner","https://fhir.nhs.uk/StructureDefinition/NHSDigital-HealthcareService"]}],"constraint":[{"key":"usercode-reference","severity":"error","human":"An identifier reference or resource reference must be provided","expression":"(reference.exists() or identifier.exists())","source":"https://fhir.nhs.uk/StructureDefinition/Extension-Provenance-agent"},{"key":"usercode-nmc","severity":"error","human":"NMC must be of the format NNANNNNA","expression":"identifier.exists().not() or identifier.where(system='https://fhir.hl7.org.uk/Id/nmc-number').exists().not() or (identifier.where(system='https://fhir.hl7.org.uk/Id/nmc-number').exists()  and identifier.where(system='https://fhir.hl7.org.uk/Id/nmc-number').value.matches('^[0-9]{2}[A-Z]{1}[0-9]{4}[A-Z]{1}$'))","source":"https://fhir.nhs.uk/StructureDefinition/Extension-Provenance-agent"},{"key":"usercode-gmp","severity":"error","human":"GMP must be of the format GNNNNNNN and not be a spurious code (starts with G6 or G7)","expression":"identifier.exists().not() or identifier.where(system='https://fhir.hl7.org.uk/Id/gmp-number').exists().not() or (identifier.where(system='https://fhir.hl7.org.uk/Id/gmp-number').exists()  and identifier.where(system='https://fhir.hl7.org.uk/Id/gmp-number').value.matches('^[G]{1}[01234589]{1}[0-9]{6}$'))","source":"https://fhir.nhs.uk/StructureDefinition/Extension-Provenance-agent"},{"key":"usercode-gmc","severity":"error","human":"GMC must be of the format CNNNNNNN","expression":"identifier.exists().not() or identifier.where(system='https://fhir.hl7.org.uk/Id/gmc-number').exists().not() or (identifier.where(system='https://fhir.hl7.org.uk/Id/gmc-number').exists()  and identifier.where(system='https://fhir.hl7.org.uk/Id/gmc-number').value.matches('^[C]{1}[0-9]{7}$'))","source":"https://fhir.nhs.uk/StructureDefinition/Extension-Provenance-agent"},{"key":"usercode-gphc","severity":"error","human":"GPHC must be of the format NNNNNNN","expression":"identifier.exists().not() or identifier.where(system='https://fhir.hl7.org.uk/Id/gphc-number').exists().not() or (identifier.where(system='https://fhir.hl7.org.uk/Id/gphc-number').exists()  and identifier.where(system='https://fhir.hl7.org.uk/Id/gphc-number').value.matches('^[0-9]{7}$'))","source":"https://fhir.nhs.uk/StructureDefinition/Extension-Provenance-agent"},{"key":"usercode-hcpc","severity":"error","human":"HCPC must be of the format AANNNNNN","expression":"identifier.exists().not() or identifier.where(system='https://fhir.hl7.org.uk/Id/hcpc-number').exists().not() or (identifier.where(system='https://fhir.hl7.org.uk/Id/hcpc-number').exists()  and identifier.where(system='https://fhir.hl7.org.uk/Id/hcpc-number').value.matches('^[A-Z]{2}[0-9]{6}$'))","source":"https://fhir.nhs.uk/StructureDefinition/Extension-Provenance-agent"},{"key":"usercode-din","severity":"error","human":"DIN format must be NNNNNN","expression":"identifier.exists().not() or identifier.where(system='https://fhir.hl7.org.uk/Id/din-number').exists().not() or (identifier.where(system='https://fhir.hl7.org.uk/Id/din-number').exists()  and identifier.where(system='https://fhir.hl7.org.uk/Id/din-number').value.matches('^[0-9]{6}$'))","source":"https://fhir.nhs.uk/StructureDefinition/Extension-Provenance-agent"},{"key":"role-sds-role-profile","severity":"error","human":"SDS Role Profile Id must be 12 digits","expression":"identifier.where(system='https://fhir.nhs.uk/Id/sds-role-profile-id').exists().not() or (identifier.where(system='https://fhir.nhs.uk/Id/sds-role-profile-id').exists()  and identifier.where(system='https://fhir.nhs.uk/Id/sds-role-profile-id').value.matches('^[0-9]{12}$'))","source":"https://fhir.nhs.uk/StructureDefinition/NHSDigital-PractitionerRole"}]},{"id":"Extension.value[x].identifier","path":"Extension.value[x].identifier","min":1},{"id":"Extension.value[x].identifier.system","path":"Extension.value[x].identifier.system","min":1},{"id":"Extension.value[x].identifier.value","path":"Extension.value[x].identifier.value","min":1}]}}